<project name="eionet-dir" default="compile" basedir=".">

  <!--property file="build.properties" /-->

  <!-- set global properties for this build -->

  <property name="tmp.dest" value="/tmp"/>

	<!--destination of built JAR -->
	<property name="destination" value="../lib"/>
	
	<property name="src" value="${tmp.dest}/EionetDir/src"/>
  <property name="build" value="${tmp.dest}/EionetDir/classes"/>
  <property name="lib.dir" value="${tmp.dest}/EionetDir/lib"/>

	<target name="export_current">
		<fail unless="destination">You have to specify the destination of JAR file: ant install -Ddestination=/prj/.../lib</fail>
		<cvs dest="${tmp.dest}" command="export -D today -d EionetDir Java/EionetDir" />
	</target>

  <target name="compile" depends="export_current">
    <!-- Compile the java code from ${src} into ${build} -->
		<mkdir dir="${tmp.dest}/EionetDir/classes"/>
		<javac debug="on" deprecation="off"
       srcdir="${src}"
       destdir="${build}" classpath="${lib.dir}/ldap.jar"/>
  </target>

  <target name="install" depends="compile"> 
    <jar basedir="${build}" jarfile="${destination}/eionet-dir.jar" includes="**/*.class"/>
		<antcall target="cleanup"/>
		<antcall target="tell_instructions"/>
  </target>

	<target name="tell_instructions">
		<echo>============================================================================</echo>
		<echo>You have to add a property ldap.backup.url to eionetdir.properties</echo>
				<echo>============================================================================</echo>
	</target>


	<target name="cleanup">
		<delete dir="${tmp.dest}/EionetDir"/>		
	</target>
</project>

